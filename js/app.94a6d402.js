(function(t){function e(e){for(var a,s,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],a=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var a={},n={app:0},i=[];function s(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=a,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(r,a,function(e){return t[e]}.bind(null,a));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("section",{staticClass:"location-select"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-sm-6"},[r("h3",[t._v("Выбор страны")]),r("div",{staticClass:"input-group mb-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.currentCountry,expression:"currentCountry"}],staticClass:"custom-select",on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentCountry=e.target.multiple?r:r[0]},t.countryChange]}},[r("option",{attrs:{value:"RU"}},[t._v("Russia")]),r("option",{attrs:{value:"UA"}},[t._v("Ukraine")]),r("option",{attrs:{value:"BY"}},[t._v("Belarus")])])])]),r("div",{staticClass:"col col-sm-6"},[r("h3",[t._v("Выбор города")]),r("div",{staticClass:"input-group mb-3"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCity,expression:"selectedCity"}],staticClass:"custom-select",attrs:{id:"inputGroupSelect03"},on:{change:[function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedCity=e.target.multiple?r:r[0]},t.fetchWeather]}},t._l(t.cities,(function(e,a){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0)])])])])])])]),r("section",{staticClass:"big-weather"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[t.resultPreloader?r("div",{staticClass:"result-preloader"},[r("img",{attrs:{src:"assets/img/preloader.gif",alt:""}})]):r("div",[r("div",{staticClass:"today-forecast"},[r("div",{staticClass:"today-forecast__left"},[r("div",{staticClass:"today-forecast__header"},[r("div",{staticClass:"main-city-name"},[t._v("Прогоз погоды в "),r("strong",[t._v(t._s(t.getCurrentCityWeather.name)+",")]),t._v(" "+t._s(t.countries[t.currentCountry]))]),r("div",[t._v("сегодня "+t._s(t._f("myDateFilter")(t.currentCityHourlyWeather.current.dt)))])]),r("div",{staticClass:"today-temp"},[r("div",{staticClass:"today-temp__graph"},[r("img",{attrs:{src:t.getIconPath,alt:""}}),r("span",{staticClass:"main-temp",domProps:{innerHTML:t._s(t.$options.filters.celciumPlus(t.getCurrentCityWeather.main.temp))}})]),r("div",[t._v(t._s(t.getCurrentCityWeather.weather[0].description)+" "),r("div",[r("strong",[t._v(" ощущается как "),r("span",{domProps:{innerHTML:t._s(t.$options.filters.celcium(t.getCurrentCityWeather.main.feels_like))}})])])])])]),r("div",{staticClass:"today-forecast__right"},[r("div",{staticClass:"today-forecast__col"},[r("h5",[t._v("Утром")]),r("div",[r("span",{domProps:{innerHTML:t._s(t.$options.filters.celcium(t.currentCityHourlyWeather.daily[0].temp.morn))}})])]),r("div",{staticClass:"today-forecast__col"},[r("h5",[t._v("Днем")]),r("div",[r("span",{domProps:{innerHTML:t._s(t.$options.filters.celcium(t.currentCityHourlyWeather.daily[0].temp.day))}})])]),r("div",{staticClass:"today-forecast__col"},[r("h5",[t._v("Вечером")]),r("div",[r("span",{domProps:{innerHTML:t._s(t.$options.filters.celcium(t.currentCityHourlyWeather.daily[0].temp.eve))}})])]),r("div",{staticClass:"today-forecast__col"},[r("h5",[t._v("Ночью")]),r("div",[r("span",{domProps:{innerHTML:t._s(t.$options.filters.celcium(t.currentCityHourlyWeather.daily[0].temp.night))}})])])])]),r("div",{staticClass:"week-forecast"},t._l(t.currentCityHourlyWeather.daily,(function(e,a){return r("div",{key:e.dt,staticClass:"week-forecast__card"},[a>0?r("p",{staticClass:"text-center"},[t._v(t._s(t._f("myDateFilterWeek")(e.dt)))]):r("p",[t._v("Сегодня")]),r("p",{staticClass:"week-forecast__icon"},[r("img",{attrs:{src:t.getWeeklyIconPath(e.weather[0].icon),alt:"alt"}})]),r("p",{staticClass:"text-center day-night"},[r("span",{domProps:{innerHTML:t._s(t.$options.filters.celciumPlus(e.temp.day))}}),r("span",{staticStyle:{opacity:".5"},domProps:{innerHTML:t._s(t.$options.filters.celciumPlus(e.temp.night))}})]),r("div",{staticClass:"d-none d-xl-block"},[r("p",{staticClass:"text-center daily-descr"},[t._v(t._s(e.weather[0].description))]),r("p",[t._v("давление: "+t._s(t._f("pressure")(e.pressure)))]),r("p",[t._v("влажность: "+t._s(e.humidity)+"%")]),r("p",[t._v("ветер: "+t._s(e.wind_speed)+"м/с")])])])})),0)])])])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:t.resultPreloader,expression:"resultPreloader"}],staticClass:"result-preloader"},[r("img",{attrs:{src:"img/preloader.gif",alt:""}})])])},i=[],s=(r("4de4"),r("4160"),r("d81d"),r("b0c0"),r("d3b7"),r("25f0"),r("159b"),r("2909")),o=(r("96cf"),r("1da1")),c=r("ade3"),l={name:"App",data:function(){return{cityData:[],selectedCity:null,currentCountry:"RU",countries:{RU:"Russia",BY:"Belarus",UA:"Ukrain"},currentCityWeather:{coord:{lon:"",lat:""},weather:[{id:"",main:"",description:"",icon:""}],base:"",main:{temp:"",feels_like:"",temp_min:"",temp_max:"",pressure:"",humidity:""},visibility:"",wind:{speed:"",deg:""},clouds:{all:""},dt:"",sys:{type:"",id:"",country:"",sunrise:"",sunset:""},timezone:"",id:"",name:"",cod:""},currentCityHourlyWeather:{current:{dt:""},hourly:[],daily:[{weather:[{icon:""}],temp:Object(c["a"])({eve:"",night:"",morn:""},"night","")}]},resultPreloader:!1,queryPreloader:!1,myChart:null,fetchWeatherCounter:0,inputedCity:""}},computed:{cities:function(){var t=this;return this.cityData.filter((function(e){return e.country===t.currentCountry&&"-"!==e.name})).sort((function(t,e){return t.name.toLowerCase()>e.name.toLowerCase()?1:t.name.toLowerCase()<e.name.toLowerCase()?-1:0}))},getCityName:function(){var t=this;return this.selectedCity?this.cities.filter((function(e){return e.id===t.cities[0]["id"]}))[0]["name"]:""},getCurrentCityWeather:function(){return this.currentCityWeather},getIconPath:function(){return"https://openweathermap.org/img/wn/"+this.getCurrentCityWeather.weather[0].icon+"@2x.png"},getChartData:function(){var t=this,e=this.currentCityHourlyWeather.hourly.map((function(e){return t.$options.filters.dateConvert(e.dt)+"ч"})),r=this.currentCityHourlyWeather.hourly.map((function(t){return Math.round(t.temp-273)}));return{labels:e,dataChart:r}}},methods:{findCity:function(){var t=this;console.log(this.inputedCity),this.selectedCity=this.cities.filter((function(e){return e.name.toLowerCase()===t.inputedCity.toLowerCase()}))[0].id,this.fetchWeather()},fetchWeather:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.resultPreloader=!0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/weather?id="+t.selectedCity+"&appid=34e679245e0fc389640636a857efea87&lang=RU");case 3:return r=e.sent,e.next=6,r.json();case 6:a=e.sent,t.currentCityWeather=a,t.resultPreloader=!1,t.fetchWeatherHourly();case 10:case"end":return e.stop()}}),e)})))()},fetchWeatherHourly:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.resultPreloader=!0,e.next=3,fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+t.getCurrentCityWeather.coord.lat+"&lon="+t.getCurrentCityWeather.coord.lon+"&exclude=minutely,alerts&appid=34e679245e0fc389640636a857efea87&lang=RU");case 3:return r=e.sent,e.next=6,r.json();case 6:a=e.sent,t.currentCityHourlyWeather=a,t.fetchWeatherCounter>0||console.log("else!"),t.fetchWeatherCounter++,t.resultPreloader=!1;case 11:case"end":return e.stop()}}),e)})))()},fetchWeatherHourlyOnce:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat="+t.getCurrentCityWeather.coord.lat+"&lon="+t.getCurrentCityWeather.coord.lon+"&exclude=minutely&appid=34e679245e0fc389640636a857efea87&lang=RU");case 2:return r=e.sent,e.next=5,r.json();case 5:a=e.sent,t.currentCityHourlyWeather=a;case 7:case"end":return e.stop()}}),e)})))()},countryChange:function(){this.selectedCity=this.cities[0].id,this.fetchWeather()},chartUpdate:function(){this.myChart.data.datasets[0].data=this.getChartData.dataChart,this.myChart.update()},chartSetup:function(){console.log(this.$refs.chart),Chart.plugins.register({afterDatasetsDraw:function(t,e){var r=t.chart.ctx;t.data.datasets.forEach((function(e,a){var n=t.getDatasetMeta(a);n.hidden||n.data.forEach((function(t,a){r.fillStyle="rgb(0, 0, 0)";var n=12,i="normal",s="Helvetica Neue";r.font=Chart.helpers.fontString(n,i,s);var o="";o=e.data[a].toString()+"°C",r.textAlign="center",r.textBaseline="middle";var c=20,l=t.tooltipPosition();r.fillText(o,l.x,l.y-n/2-c)}))}))}});var t=this.$refs.chart.getContext("2d");this.myChart=new Chart(t,{type:"line",data:{labels:this.getChartData.labels,datasets:[{data:this.getChartData.dataChart,backgroundColor:"rgba(255, 99, 132, 0.1)",pointBorderColor:"transparent",pointBackgroundColor:"transparent",borderColor:"#EB6E4B",fill:!0,borderWidth:3}]},options:{tooltips:{mode:!1},showAllTooltips:!0,responsive:!0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{display:!1,max:Math.max.apply(Math,Object(s["a"])(this.dataChart))+3},gridLines:{display:!1}}],xAxes:[{scaleLabel:{display:!0,labelString:"часы"},gridLines:{display:!1,drawBorder:!1}}]}}})},getWeeklyIconPath:function(t){return"https://openweathermap.org/img/wn/"+t+"@2x.png"},swiperSetup:function(){new Swiper(this.$refs.swiper,{slidesPerView:8})}},filters:{pressure:function(t){return Math.round(.00750063755419211*t*100)+"мм.рт.ст."},dateConvert:function(t){var e=new Date(1e3*t).getHours();return e<10?"0"+e:e.toString()},celcium:function(t){return"".concat(Math.round(t-273),"<span>&#176;C</span>")},celciumPlus:function(t){return"".concat(Math.round(t-273),"<span>&#176;</span>")},dateFilter:function(t){var e={day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"},r="ru-RU";return console.log("data gilter locale "+r),new Intl.DateTimeFormat(r,e).format(new Date(t))},myDateFilter:function(t){var e=new Date(1e3*t),r={year:"numeric",month:"long",day:"numeric",weekday:"short"};return e.toLocaleString("ru",r)},myDateFilterWeek:function(t){var e=new Date(1e3*t),r={weekday:"short",day:"numeric",month:"numeric"};return e.toLocaleString("ru",r)}},mounted:function(){var t=this;console.log("mounted"),console.log(this.currentCityWeather),fetch("./done.json").then((function(t){return t.json()})).then((function(e){console.log(e),t.cityData=e.filter((function(t){return"RU"===t.country||"UA"===t.country||"BY"===t.country})),t.selectedCity=t.cities[0].id,t.fetchWeather()})).catch((function(t){return console.error(t)}))}},u=l,d=(r("5c0b"),r("2877")),p=Object(d["a"])(u,n,i,!1,null,null,null),h=p.exports,f=r("2f62");a["a"].use(f["a"]);var y=new f["a"].Store({state:{},mutations:{},actions:{},modules:{}}),m=r("260b"),v=(r("ea7b"),r("66ce"),{apiKey:"AIzaSyB3O5sLFic-DhPWrxOtOnEdRwmpMm4ccRU",authDomain:"podcast--app-43aa6.firebaseapp.com",databaseURL:"https://podcast--app-43aa6.firebaseio.com",projectId:"podcast--app-43aa6",storageBucket:"podcast--app-43aa6.appspot.com",messagingSenderId:"427653917967",appId:"1:427653917967:web:bcf833b9e1c47745fd227a"});m["a"].initializeApp(v);m["a"].database();a["a"].config.productionTip=!1,new a["a"]({store:y,render:function(t){return t(h)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";r("9c0c")},"9c0c":function(t,e,r){}});
//# sourceMappingURL=app.94a6d402.js.map